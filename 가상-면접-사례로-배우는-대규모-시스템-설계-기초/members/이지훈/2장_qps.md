시스템 설계 면접에서 자주 나오는 규모 추정 정리

시스템 설계 면접에서는 정밀한 계산보다, 합리적인 가정과 빠른 근사치를 기반으로 전체 규모를 설명하는 능력을 본다. 보통 아래 항목들을 추정하라는 질문이 나온다.

- QPS / Peak QPS
- 저장소 요구량
- 캐시 요구량
- 서버 대수

중요한 건 계산 결과보다, 계산 과정이 논리적인지다.

기본 원칙

- 근사치를 적극적으로 사용한다
  999.99 같은 숫자는 1000으로, 9.4는 10으로 둔다
- 모든 가정은 말로 먼저 선언한다
- 숫자에는 반드시 단위를 붙인다 (KB, MB, QPS 등)
- 세부 정확도보다 자릿수 감각이 중요하다

규모 추정을 위한 기본 감각

시스템 용량이나 성능 요구사항을 추정하려면, 아래 세 가지는 거의 암기 수준으로 익숙해야 한다.

- 2의 제곱수 단위
- 응답 지연 특성
- 가용성 수치

2의 제곱수 기준 데이터 단위

데이터 크기 계산은 항상 2의 제곱수 기준으로 단순화한다.

- 1 KB = 2^10
- 1 MB = 2^20
- 1 GB = 2^30
- 1 TB = 2^40
- 1 PB = 2^50

이 감각이 없으면 저장소 계산에서 바로 무너진다.

응답 지연에 대한 직관

실제 시스템에서의 성능 병목은 대부분 아래 특성에서 나온다.

- 메모리는 빠르고, 디스크는 느리다
- 디스크 seek 는 가능하면 피해야 한다
- 단순한 압축 알고리즘은 매우 빠르다
- 네트워크 전송 전 압축은 거의 항상 이득이다
- 데이터 센터가 지역 간 분산되면, 센터 간 통신 지연이 발생한다

시스템 설계에서 캐시, 비동기 처리, 지역 분산을 왜 쓰는지 설명할 때 자주 쓰인다.

가용성 수치 감각

가정

- 월간 활성 사용자(MAU) 3억 명
- 그중 50%가 매일 사용
- 사용자 1명당 하루 게시물 2건 작성
- 게시물 중 10%는 미디어 포함
- 데이터 보관 기간 5년

QPS 추정

- 일간 활성 사용자 = 3억 × 50% = 1.5억
- 하루 게시물 수 = 1.5억 × 2 = 3억 건
- 초당 게시물 수 = 3억 / 86,400 ≈ 3,500 QPS
- 읽기 + 쓰기를 단순히 2배로 잡으면
  약 7,000 QPS

저장소 추정

게시물 평균 크기 가정

- 메타데이터(ID 등) 64B
- 텍스트 140B
- 미디어 1MB (게시물의 10%)

미디어 저장량 계산

- 하루 미디어 게시물 수 = 3억 × 10% = 3천만
- 하루 미디어 저장량 ≈ 30TB
- 5년 저장량 ≈ 30TB × 365 × 5 ≈ 55PB

이 정도 추정이 면접에서는 충분하다.

정확한 숫자보다, 흐름이 자연스러운지가 핵심이다.
